{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import'./JobsPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const JobsListPage=()=>{const[jobs,setJobs]=useState([]);const[error,setError]=useState(null);const[isLoading,setIsLoading]=useState(true);const[deletingJobId,setDeletingJobId]=useState(null);useEffect(()=>{fetchJobs();},[]);const fetchJobs=async()=>{try{const response=await fetch('/api/jobs');if(!response.ok){throw new Error('Network response was not ok');}const data=await response.json();setJobs(data);}catch(error){setError(error.message);console.error(\"Failed to fetch jobs:\",error);}finally{setIsLoading(false);}};const handleDeleteJob=async(jobId,jobDescription)=>{var _jobs$find;const confirmMessage=`Are you sure you want to delete this job?\\n\\n\"${jobDescription.substring(0,100)}...\"\\n\\nThis will permanently delete the job and all ${((_jobs$find=jobs.find(j=>j.id===jobId))===null||_jobs$find===void 0?void 0:_jobs$find.resume_count)||0} associated resumes. This action cannot be undone.`;if(!window.confirm(confirmMessage)){return;}setDeletingJobId(jobId);try{const response=await fetch(`/api/jobs/${jobId}`,{method:'DELETE'});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||'Failed to delete job');}const result=await response.json();console.log('Job deleted:',result);// Refresh the jobs list\nawait fetchJobs();}catch(error){setError(`Failed to delete job: ${error.message}`);console.error(\"Failed to delete job:\",error);}finally{setDeletingJobId(null);}};const truncateText=(text,length)=>{if(text.length<=length)return text;return text.substring(0,length)+'...';};return/*#__PURE__*/_jsxs(\"div\",{className:\"jobs-page-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Active Job Roles\"}),isLoading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading jobs...\"}),error&&/*#__PURE__*/_jsxs(\"p\",{className:\"message error\",children:[\"Error: \",error]}),!isLoading&&!error&&/*#__PURE__*/_jsx(\"div\",{className:\"jobs-grid\",children:jobs.length>0?jobs.map(job=>/*#__PURE__*/_jsxs(\"div\",{className:\"glass-container job-card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:truncateText(job.description,100)}),/*#__PURE__*/_jsx(\"div\",{className:\"job-card-meta\",children:/*#__PURE__*/_jsxs(\"span\",{children:[job.resume_count,\" R\\xE9sum\\xE9s\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"job-card-actions\",children:[/*#__PURE__*/_jsx(Link,{to:`/jobs/${job.id}`,className:\"details-button\",children:\"View Analysis\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-button\",onClick:()=>handleDeleteJob(job.id,job.description),disabled:deletingJobId===job.id,children:deletingJobId===job.id?'Deleting...':'Delete'})]})]},job.id)):/*#__PURE__*/_jsxs(\"p\",{children:[\"No jobs submitted yet. \",/*#__PURE__*/_jsx(Link,{to:\"/upload\",children:\"Upload one now!\"})]})})]});};export default JobsListPage;","map":{"version":3,"names":["React","useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","JobsListPage","jobs","setJobs","error","setError","isLoading","setIsLoading","deletingJobId","setDeletingJobId","fetchJobs","response","fetch","ok","Error","data","json","message","console","handleDeleteJob","jobId","jobDescription","_jobs$find","confirmMessage","substring","find","j","id","resume_count","window","confirm","method","errorData","result","log","truncateText","text","length","className","children","map","job","description","to","onClick","disabled"],"sources":["/Users/aryansrivatsavadande/Downloads/TalentVibe-v1check/frontend/src/JobsListPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport './JobsPage.css';\n\nconst JobsListPage = () => {\n    const [jobs, setJobs] = useState([]);\n    const [error, setError] = useState(null);\n    const [isLoading, setIsLoading] = useState(true);\n    const [deletingJobId, setDeletingJobId] = useState(null);\n\n    useEffect(() => {\n        fetchJobs();\n    }, []);\n\n    const fetchJobs = async () => {\n        try {\n            const response = await fetch('/api/jobs');\n            if (!response.ok) {\n                throw new Error('Network response was not ok');\n            }\n            const data = await response.json();\n            setJobs(data);\n        } catch (error) {\n            setError(error.message);\n            console.error(\"Failed to fetch jobs:\", error);\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    const handleDeleteJob = async (jobId, jobDescription) => {\n        const confirmMessage = `Are you sure you want to delete this job?\\n\\n\"${jobDescription.substring(0, 100)}...\"\\n\\nThis will permanently delete the job and all ${jobs.find(j => j.id === jobId)?.resume_count || 0} associated resumes. This action cannot be undone.`;\n        \n        if (!window.confirm(confirmMessage)) {\n            return;\n        }\n\n        setDeletingJobId(jobId);\n        \n        try {\n            const response = await fetch(`/api/jobs/${jobId}`, {\n                method: 'DELETE',\n            });\n\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw new Error(errorData.error || 'Failed to delete job');\n            }\n\n            const result = await response.json();\n            console.log('Job deleted:', result);\n            \n            // Refresh the jobs list\n            await fetchJobs();\n            \n        } catch (error) {\n            setError(`Failed to delete job: ${error.message}`);\n            console.error(\"Failed to delete job:\", error);\n        } finally {\n            setDeletingJobId(null);\n        }\n    };\n\n    const truncateText = (text, length) => {\n        if (text.length <= length) return text;\n        return text.substring(0, length) + '...';\n    };\n\n    return (\n        <div className=\"jobs-page-container\">\n            <h2>Active Job Roles</h2>\n            {isLoading && <p>Loading jobs...</p>}\n            {error && <p className=\"message error\">Error: {error}</p>}\n            {!isLoading && !error && (\n                <div className=\"jobs-grid\">\n                    {jobs.length > 0 ? (\n                        jobs.map(job => (\n                            <div key={job.id} className=\"glass-container job-card\">\n                                <h3>{truncateText(job.description, 100)}</h3>\n                                <div className=\"job-card-meta\">\n                                    <span>{job.resume_count} Résumés</span>\n                                </div>\n                                <div className=\"job-card-actions\">\n                                    <Link to={`/jobs/${job.id}`} className=\"details-button\">View Analysis</Link>\n                                    <button \n                                        className=\"delete-button\"\n                                        onClick={() => handleDeleteJob(job.id, job.description)}\n                                        disabled={deletingJobId === job.id}\n                                    >\n                                        {deletingJobId === job.id ? 'Deleting...' : 'Delete'}\n                                    </button>\n                                </div>\n                            </div>\n                        ))\n                    ) : (\n                        <p>No jobs submitted yet. <Link to=\"/upload\">Upload one now!</Link></p>\n                    )}\n                </div>\n            )}\n        </div>\n    );\n};\n\nexport default JobsListPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}